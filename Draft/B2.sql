exec sp_executesql N'SELECT T0.[TransId], T0.[ApplyEntry], T0.[ApplyLine], T0.[ApplyType], MIN(T0.[LogEntry]), MIN(T0.[AppDocNum]), MIN(T0.[DocDate]), T0.[LocCode], MIN(T0.[CardCode]), MIN(T0.[CardName]), SUM(T1.[Quantity]), SUM(T1.[AllocQty]), SUM(T1.[OrderedQty]), T0.[Instance], MIN(T4.[BinCode]), MIN(T4.[SnBTransRptFirstBinViewBinCount]) FROM  [dbo].[OITL] T0  INNER  JOIN [dbo].[ITL1] T1  ON  T1.[LogEntry] = T0.[LogEntry]   INNER  JOIN [dbo].[OITM] T2  ON  T2.[ItemCode] = T0.[ItemCode]    LEFT OUTER  JOIN [dbo].[OCRD] T3  ON  T3.[CardCode] = T0.[CardCode]    LEFT OUTER  JOIN [dbo].[B1_SnBTransRptFirstBinView] T4  ON  T4.[ITLEntry] = T0.[LogEntry]  AND  T4.[SnBMDAbs] = T1.[MdAbsEntry]   WHERE T0.[ManagedBy] = (@P1)  AND  T0.[ItemCode] = (@P2)  AND  T1.[SysNumber] = (@P3)  AND  T0.[LocCode] = (@P4)  AND  T2.[InvntItem] = (@P5)  AND   NOT EXISTS (SELECT U0.[DocEntry] FROM  [dbo].[ORDR] U0  WHERE T0.[Instance] = (@P6)  AND  T0.[ApplyEntry] = U0.[DocEntry]  AND  T0.[ApplyType] = U0.[ObjType]  AND  U0.[CANCELED] = (@P7)  )   GROUP BY T0.[TransId], T0.[ApplyEntry], T0.[ApplyLine], T0.[ApplyType], T0.[LocCode], T0.[Instance], T0.[LocType] HAVING SUM(T1.[Quantity]) <> (@P8)  OR  SUM(T1.[AllocQty]) <> (@P9)  OR  SUM(T1.[OrderedQty]) <> (@P10)   ORDER BY T0.[TransId],MIN(T0.[LogEntry])',N'@P1 int,@P2 nvarchar(254),@P3 int,@P4 nvarchar(254),@P5 char(1),@P6 smallint,@P7 char(1),@P8 numeric(25,6),@P9 numeric(25,6),@P10 numeric(25,6)',10000044,N'0000001',9,N'W3','Y',0,'Y',0,0,0